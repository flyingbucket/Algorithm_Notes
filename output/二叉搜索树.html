<!DOCTYPE html><html><head>
      <title>二叉搜索树</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/flyingbucket/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.8.14/crossnote/dependencies/katex/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="二叉搜索树">二叉搜索树 </h1>
<h2 id="定义">定义 </h2>
<p>二叉搜索树（Binary Search Tree，BST）是一种特殊的二叉树，每个节点都是一个对象,每个对象包含的属性为卫星数据、key、左孩子、右孩子和父节点。<br>
其中key是节点的唯一标识，左孩子指针指向左子树的根节点，右孩子指针指向右子树的根节点，父节点指针指向父节点。<br>
其中key是卫星数据的唯一标识，有卫星和数据经过某种哈希算法得到的key。</p>
<pre data-role="codeBlock" data-info="python{/line-numbers}" class="language-python python"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">BSTreeNode</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">,</span><span class="token builtin">hash</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> val  <span class="token comment"># 卫星数据</span>
        <span class="token keyword keyword-if">if</span> <span class="token builtin">hash</span> <span class="token keyword keyword-is">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>key <span class="token operator">=</span> val  <span class="token comment"># key</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>key <span class="token operator">=</span> <span class="token builtin">hash</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>  <span class="token comment"># key</span>
        self<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># 左孩子指针</span>
        self<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token boolean">None</span> <span class="token comment"># 右孩子指针</span>
        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token boolean">None</span> <span class="token comment"># 父节点指针</span>
        self<span class="token punctuation">.</span><span class="token builtin">hash</span><span class="token operator">=</span><span class="token builtin">hash</span> <span class="token comment"># 哈希函数</span>
</code></pre><h2 id="性质">性质 </h2>
<p>x=Node(val,hash)</p>
<ul>
<li>左子树中的<strong>所有节点</strong>的值均小于根节点的值: x.left.val &lt; x.val</li>
<li>右子树中的<strong>所有节点</strong>的值均大于根节点的值: x.right.val &gt; x.val</li>
<li>左右子树也分别为二叉搜索树。</li>
<li>没有键值相等的节点。</li>
</ul>
<h2 id="中序遍历">中序遍历 </h2>
<p>先序遍历：根左右<br>
中序遍历：左根右<br>
后序遍历：左右根</p>
<p>在中序遍历下，二叉搜索树将按key值升序输出。</p>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>IN-ORDER-TREE-WALK(x):
    if x is not None:
        IN-ORDER-TREE-WALK(x.left)
        print(x.key )
        IN-ORDER-TREE-WALK(x.right)
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></pre><p>用代入法可以验证，中序遍历的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Theta(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。</p>
<h2 id="构建">构建 </h2>
<p>由上述性质可知，要将一个数组维护成二叉搜索树，可以考虑对数组排序；然后对已排序的数组的左半部分和右半部分递归地进行维护。<br>
<em>实际上我们一般不使用这种方法，此处仅供参考，与后文的随机构建形成对比</em></p>
<pre data-role="codeBlock" data-info="python{.line-numbers}" class="language-python python line-numbers"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">BST</span><span class="token punctuation">:</span>
    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>arr<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span><span class="token builtin">hash</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-not">not</span> arr <span class="token keyword keyword-or">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment">#不传入arr或传入arr为空时，构造空树</span>
            self<span class="token punctuation">.</span>root<span class="token operator">=</span><span class="token boolean">None</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token builtin">hash</span><span class="token operator">=</span><span class="token builtin">hash</span>
            self<span class="token punctuation">.</span>key_dict<span class="token punctuation">,</span>key_list<span class="token operator">=</span>__build_hash<span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token builtin">hash</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>root<span class="token operator">=</span>__build_bst<span class="token punctuation">(</span>key_list<span class="token punctuation">)</span>
            
    <span class="token keyword keyword-def">def</span> <span class="token function">__build_hash</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token builtin">hash</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-not">not</span> arr <span class="token keyword keyword-or">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">None</span>
        <span class="token comment"># 将arr维护成哈希表，并得到key的列表</span>
        key_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token builtin">hash</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token keyword keyword-for">for</span> val <span class="token keyword keyword-in">in</span> arr<span class="token punctuation">]</span>
        <span class="token comment"># 将key_list和arr合并成一个字典</span>
        key_dict<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>key_list<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> key_dict<span class="token punctuation">,</span>key_list

    <span class="token keyword keyword-def">def</span> <span class="token function">__build_bst</span><span class="token punctuation">(</span>key_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-not">not</span> key_list <span class="token keyword keyword-or">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>key_list<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">None</span>
        mid<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>key_list<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>
        root<span class="token operator">=</span>BSTreeNode<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">hash</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
        root<span class="token punctuation">.</span>key<span class="token operator">=</span>key_list<span class="token punctuation">[</span>mid<span class="token punctuation">]</span>  
        root<span class="token punctuation">.</span>val<span class="token operator">=</span>key_dict<span class="token punctuation">[</span>root<span class="token punctuation">.</span>key<span class="token punctuation">]</span>
        root<span class="token punctuation">.</span>left<span class="token operator">=</span>__build_bst<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span><span class="token punctuation">:</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span>
        root<span class="token punctuation">.</span>right<span class="token operator">=</span>build_bst<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        root<span class="token punctuation">.</span>left<span class="token punctuation">.</span>parent<span class="token operator">=</span>root
        root<span class="token punctuation">.</span>right<span class="token punctuation">.</span>parent<span class="token operator">=</span>root
        <span class="token keyword keyword-return">return</span> root

    <span class="token keyword keyword-def">def</span> <span class="token function">get_root</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-return">return</span> self<span class="token punctuation">.</span>root

</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><h2 id="查询">查询 </h2>
<p>要查询一个关键字为k的节点，可以先从根节点查起，如果根节点的key等于k，则返回根节点；如果k小于根节点的key，则在左子树中继续查询；如果k大于根节点的key，则在右子树中继续查询。</p>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>TREE-SEARCH(x,k):
    if x==None or x.key==k:
        return x
    elif k&lt;x.key:
        return TREE-SEARCH(x.left,k)
    else:
        return TREE-SEARCH(x.right,k)
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><p>查询的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Theta(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span>，h为树的高度。</p>
<p>在大多数计算机上while循环往往效率更高，所以可以用while循环实现树的查询：</p>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>TREE-SEARCH(x,k):
    while x!= None and x.key!=k:
        if k &lt; x.key:
            x=x.left
        else:
            x=x.right
    return x
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><h2 id="最大最小值">最大最小值 </h2>
<p>从根节点开始，不断取左孩子，直到触底即可找到最小值，同理，从根节点开始，不断取右孩子，直到触底即可找到最大值。</p>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>TREE-MINIMUM(x):
    while x.left!= None:
        x=x.left
    return x

TREE-MAXIMUM(x):    
    while x.right!= None:
        x=x.right
    return x
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><p>取最小值和最大值的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Theta(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span>，h为树的高度。</p>
<h2 id="前驱与后继">前驱与后继 </h2>
<p>前驱：当前节点的左子树中的最大节点。<br>
后继：当前节点的右子树中的最小节点。</p>
<p>只介绍如何寻找后继，前驱类似。</p>
<h3 id="思路">思路 </h3>
<p>按照中序遍历的思路，要找一个节点的后继，应分以下三种情况：</p>
<ul>
<li>右子树非空，则后继为右子树的最小节点。</li>
<li>右子树为空且本身是父节点的左孩子，则后继为父节点。</li>
<li>右子树为空且本身是父节点的右孩子，则应沿父节点的父节点链向右子树，直到找到后继或到达根节点。</li>
</ul>
<h3 id="伪代码">伪代码 </h3>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>TREE-SUCCESSOR(x):
    if x.right != None:
        return TREE-MINNUM(x.right)
    y=x.p
    while y!=None and x==y.right:
        x=y
        y=y.p
    return y
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><h2 id="插入与删除">插入与删除 </h2>
<h3 id="插入">插入 </h3>
<p>插入时，总是把新节点插入到叶子节点。从树根开始，令x=T.root,如果z.key &lt; x.key,则令x=x.left,否则令x=x.right，直到x=None。然后，将z插入到x的位置。但是在具体实现时，需要注意截至条件是x=None，此时x的父节点等全部信息已经丢失，无法正确定位z的位置，解决办法是在遍历过程中，另使用一个变量y，始终指向x的父节点，以便最终确定z的位置。</p>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>z=TreeNode(val,hash)
T=BST(arr,hash)

TREE-INSERT(T,z):
    y=None
    x=T.root
    while x!=None:
        y=x
        if  z.key &lt; x.key:
            x=x.left
        else:
            x=x.right
    z.parent=y
    if y==None:
        T.root=z // 树为空，直接插入根节点
    elif z.key &lt; y.key:
        y.left=z
    else:
        y.right=z
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><h3 id="删除">删除 </h3>
<p>要从BFS中杀出一个节点是有些麻烦的，需要分为三种情况进行讨论。<br>
设T为BST树，z为被删除的节点。</p>
<ul>
<li>如果z没有左孩子，则无论z是否有右孩子，都可以直接用z的右孩子代替z的位置，并删除z。</li>
<li>如果z有左孩子，但没有右孩子，则将左孩子提升到z的位置，继承z与z.p的双向关系。</li>
<li>如果z有两个子节点，则首先要找到z的后继y，此时再分两种情况：
<ul>
<li>如果y恰好是z的右孩子，那么必定y没有左子树，可以直接用y替换z，并删除y。</li>
<li>如果y不是z的右孩子，那么y必然是z的右子树的最左侧节点，y.left=None且y.p.left=y；设r=y.p，<br>
此时将y.right提升到y的位置，继承y与y.p的双向关系，y替换z，然后将z的左子树作为y的左子树，以r为根的子树作为y的右子树。</li>
</ul>
</li>
</ul>
<p>为了便于对子树进行移动，先定义一个辅助函数TRANSPLANT（T，u，v）。将以u为根的子树替换为以v为根的子树，TRANSPLANT之负责管理好被移动节点与目标位置u的父节点之间的关系，至于v的子节点，则根据需要灵活处理。</p>
<pre data-role="codeBlock" data-info="plaintext{.line-numbers}" class="language-plaintext plaintext line-numbers"><code>TRANSPLANT(T,u,v):
    if u.parent==None:
        T.root=v
    elif u==u.p.left:
        u.p.left=v
    else:
        u.p.right=v
    if v!=None:
        v.p=u.p

TREE-DELETE(T,Z):
    if z.left==None:
        TRANSPLANT(T,z,z.right)
    elif z.right==None:
        TRASPLANT(T,z,z.left)
    else:
        y=TREE-MINIMUM(z.right)
        if y.p!=z:
            TRANSPLANT(T,y,y.right)
            y.right=z.right
            y.right.p=y
        TRANSPLANT(T,z,y)
        y.left=z.left
        y.left.p=y
        else:
            TRANSPLANT(T,z,y)
            y.left=z.left
            y.left.p=y
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><h2 id="随机构建">随机构建 </h2>
<p>将一个数组随即构建成二叉搜索树，思路是先创建空树，然后随机选取数组中的数插入树中，直到数组为空。<br>
可以证明该算法的其时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(h)=O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>，其中n为数组的长度。</p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>